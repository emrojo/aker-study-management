<%= javascript_tag do %>
  window.currentNodeId = '<%= @node.id %>'
<% end %>

<% @node.parents.each do |p| %>
  <%= linknode(p) %> /
<% end %>
<b><%= @node.name %></b>

<% if @node.root? %>
  <h2>Sanger Programs</h2>
<% else %>
  <h2><%= @node.name %></h2>
<% end %>

<% if @node.description? %>
  <p><b>Description: </b> <%= @node.description %></p>
<% end %>

<% if @node.cost_code? %>
  <p><b>Cost Code:</b> <%= @node.cost_code %></p>
<% end %>

<% if @node.nodes.empty? %>
  None
<% else %>
  <ul>
    <% @node.nodes.each do |c| %>
	     <li>
          <b><%= linknode(c) %></b>
            <% unless @node.root? %>
                (<%= edit_node(c) %> /
                <%= delete_node(c) %>)
            <% end %>
        </li>
    <% end %>
  </ul>
<% end %>

<% unless @node.root? %>
  <h4>Add child node</h4>
  <%= bootstrap_form_for(@child, url: nodes_path, method: "post") do |f| %>
    <%= f.text_field(:name, {autocomplete: 'off'}) %>
    <%= f.text_field :description %>
    <%= f.text_field :cost_code %>
    <%= f.hidden_field :parent_id %>
    <%= f.submit("Create") %>
  <% end %>
<% end %>

